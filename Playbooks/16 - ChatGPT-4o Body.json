{
  "model": "gpt-4o",
  "messages": [
    {
      "role": "system",
      "content": [
        {
          "type": "text",
          "text": "@{variables('ChatGPT Role')}"
        }
      ]
    },
    {
      "role": "user",
      "content": [
        {
          "type": "text",
          "text": "@{variables('ChatGPT Prompt')}"
        }
      ]
    }
  ],
  "response_format": {
    "type": "json_schema",
    "json_schema": {
      "name": "StructuredResponse",
      "strict": true,
      "schema": {
        "type": "object",
        "properties": {
          "response_text": {
            "type": "string",
            "description": "The main textual response from the model."
          },
          "confidence_score": {
            "type": "number",
            "description": "A value between 0 and 100 indicating confidence."
          },
          "compromised_account_upn": {
            "type": "string",
            "description": "Targen UPN (User Principal Name) of the account, if applicable."
          }
        },
        "required": [
          "response_text",
          "confidence_score",
          "compromised_account_upn"
        ],
        "additionalProperties": false
      }
    }
  },
  "temperature": 0.7,
  "max_completion_tokens": 8000,
  "top_p": 0.5,
  "frequency_penalty": 0,
  "presence_penalty": 0
}